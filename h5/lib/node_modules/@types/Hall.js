var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
System.register("Hall", ["PSDUI/newUiBase"], function (exports_1, context_1) {
    "use strict";
    var newUiBase_1, Hall, bg, socialiconbg, naver_img, naver_btn, medium_img, medium_btn, discord_img, discord_btn, youtube_img, youtube_btn, twitter_img, twitter_btn, telegram_img, telegram_btn, bg1, leftblackbg_img, player_lab, man1_btn, man_img, bg3, slideareabg, slideunit_scr, slideunitcontent, jianbianbg_img, time_lab, rightblackbg_img, line_img, right2, email1_img, email_btn, notice1_img, notice_btn, gear1_img, gear_btn, rightbg1, signal_img, ms_lab, bg2, middlebg, functionbtn1_img, functionbtn2_btn, functionbtn_lab, menubg, menu1_btn, menu_img, menulab_lab, arrow2_img, arrow1_img;
    var __moduleName = context_1 && context_1.id;
    return {
        setters: [
            function (newUiBase_1_1) {
                newUiBase_1 = newUiBase_1_1;
            }
        ],
        execute: function () {
            Hall = /** @class */ (function (_super) {
                __extends(Hall, _super);
                function Hall() {
                    var _this = _super !== null && _super.apply(this, arguments) || this;
                    _this.uiName = "Hall";
                    _this.bg = new bg();
                    _this.socialiconbg = new socialiconbg();
                    _this.bg1 = new bg1();
                    return _this;
                }
                Hall.prototype.onInit = function () {
                    if (this.onInite) {
                        this.onInite();
                    }
                    //添加按钮事件
                    this.socialiconbg.naver_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.naver_btn_event, this);
                    this.socialiconbg.medium_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.medium_btn_event, this);
                    this.socialiconbg.discord_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.discord_btn_event, this);
                    this.socialiconbg.youtube_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.youtube_btn_event, this);
                    this.socialiconbg.twitter_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.twitter_btn_event, this);
                    this.socialiconbg.telegram_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.telegram_btn_event, this);
                    this.bg1.leftblackbg_img.man1_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.man1_btn_event, this);
                    this.bg1.bg3.rightblackbg_img.right2.email_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.email_btn_event, this);
                    this.bg1.bg3.rightblackbg_img.right2.notice_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.notice_btn_event, this);
                    this.bg1.bg3.rightblackbg_img.right2.gear_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.gear_btn_event, this);
                    this.bg1.bg2.middlebg.functionbtn1_img.functionbtn2_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.functionbtn2_btn_event, this);
                    this.bg1.bg2.menubg.menu1_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.menu1_btn_event, this);
                };
                //按钮事件
                Hall.prototype.naver_btn_event = function () { if (this.naver_btn_btnEvent)
                    this.naver_btn_btnEvent(); };
                ;
                Hall.prototype.medium_btn_event = function () { if (this.medium_btn_btnEvent)
                    this.medium_btn_btnEvent(); };
                ;
                Hall.prototype.discord_btn_event = function () { if (this.discord_btn_btnEvent)
                    this.discord_btn_btnEvent(); };
                ;
                Hall.prototype.youtube_btn_event = function () { if (this.youtube_btn_btnEvent)
                    this.youtube_btn_btnEvent(); };
                ;
                Hall.prototype.twitter_btn_event = function () { if (this.twitter_btn_btnEvent)
                    this.twitter_btn_btnEvent(); };
                ;
                Hall.prototype.telegram_btn_event = function () { if (this.telegram_btn_btnEvent)
                    this.telegram_btn_btnEvent(); };
                ;
                Hall.prototype.man1_btn_event = function () { if (this.man1_btn_btnEvent)
                    this.man1_btn_btnEvent(); };
                ;
                Hall.prototype.email_btn_event = function () { if (this.email_btn_btnEvent)
                    this.email_btn_btnEvent(); };
                ;
                Hall.prototype.notice_btn_event = function () { if (this.notice_btn_btnEvent)
                    this.notice_btn_btnEvent(); };
                ;
                Hall.prototype.gear_btn_event = function () { if (this.gear_btn_btnEvent)
                    this.gear_btn_btnEvent(); };
                ;
                Hall.prototype.functionbtn2_btn_event = function () { if (this.functionbtn2_btn_btnEvent)
                    this.functionbtn2_btn_btnEvent(); };
                ;
                Hall.prototype.menu1_btn_event = function () { if (this.menu1_btn_btnEvent)
                    this.menu1_btn_btnEvent(); };
                ;
                //文字修改方法
                /**修改label  this.bg1.leftblackbg_img.player_lab.label 修改label文字方法*/
                Hall.prototype.player_lab_text = function (text) { this.bg1.leftblackbg_img.player_lab.label.text = text; };
                /**修改label 修改label文字方法*/
                Hall.prototype.time_lab_text = function (text) { this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.time_lab.label.text = text; };
                /**修改label  this.bg1.bg3.rightblackbg_img.rightbg1.ms_lab.label 修改label文字方法*/
                Hall.prototype.ms_lab_text = function (text) { this.bg1.bg3.rightblackbg_img.rightbg1.ms_lab.label.text = text; };
                /**修改label  this.bg1.bg2.middlebg.functionbtn1_img.functionbtn_lab.label 修改label文字方法*/
                Hall.prototype.functionbtn_lab_text = function (text) { this.bg1.bg2.middlebg.functionbtn1_img.functionbtn_lab.label.text = text; };
                /**修改label  this.bg1.bg2.menubg.menulab_lab.label 修改label文字方法*/
                Hall.prototype.menulab_lab_text = function (text) { this.bg1.bg2.menubg.menulab_lab.label.text = text; };
                return Hall;
            }(newUiBase_1.newUiBase));
            exports_1("Hall", Hall);
            bg = /** @class */ (function () {
                function bg() {
                }
                return bg;
            }());
            exports_1("bg", bg);
            socialiconbg = /** @class */ (function () {
                function socialiconbg() {
                    this.naver_img = new naver_img();
                    this.naver_btn = new naver_btn();
                    this.medium_img = new medium_img();
                    this.medium_btn = new medium_btn();
                    this.discord_img = new discord_img();
                    this.discord_btn = new discord_btn();
                    this.youtube_img = new youtube_img();
                    this.youtube_btn = new youtube_btn();
                    this.twitter_img = new twitter_img();
                    this.twitter_btn = new twitter_btn();
                    this.telegram_img = new telegram_img();
                    this.telegram_btn = new telegram_btn();
                }
                return socialiconbg;
            }());
            exports_1("socialiconbg", socialiconbg);
            naver_img = /** @class */ (function () {
                function naver_img() {
                }
                return naver_img;
            }());
            exports_1("naver_img", naver_img);
            naver_btn = /** @class */ (function () {
                function naver_btn() {
                }
                return naver_btn;
            }());
            exports_1("naver_btn", naver_btn);
            medium_img = /** @class */ (function () {
                function medium_img() {
                }
                return medium_img;
            }());
            exports_1("medium_img", medium_img);
            medium_btn = /** @class */ (function () {
                function medium_btn() {
                }
                return medium_btn;
            }());
            exports_1("medium_btn", medium_btn);
            discord_img = /** @class */ (function () {
                function discord_img() {
                }
                return discord_img;
            }());
            exports_1("discord_img", discord_img);
            discord_btn = /** @class */ (function () {
                function discord_btn() {
                }
                return discord_btn;
            }());
            exports_1("discord_btn", discord_btn);
            youtube_img = /** @class */ (function () {
                function youtube_img() {
                }
                return youtube_img;
            }());
            exports_1("youtube_img", youtube_img);
            youtube_btn = /** @class */ (function () {
                function youtube_btn() {
                }
                return youtube_btn;
            }());
            exports_1("youtube_btn", youtube_btn);
            twitter_img = /** @class */ (function () {
                function twitter_img() {
                }
                return twitter_img;
            }());
            exports_1("twitter_img", twitter_img);
            twitter_btn = /** @class */ (function () {
                function twitter_btn() {
                }
                return twitter_btn;
            }());
            exports_1("twitter_btn", twitter_btn);
            telegram_img = /** @class */ (function () {
                function telegram_img() {
                }
                return telegram_img;
            }());
            exports_1("telegram_img", telegram_img);
            telegram_btn = /** @class */ (function () {
                function telegram_btn() {
                }
                return telegram_btn;
            }());
            exports_1("telegram_btn", telegram_btn);
            bg1 = /** @class */ (function () {
                function bg1() {
                    this.leftblackbg_img = new leftblackbg_img();
                    this.bg3 = new bg3();
                    this.bg2 = new bg2();
                }
                return bg1;
            }());
            exports_1("bg1", bg1);
            leftblackbg_img = /** @class */ (function () {
                function leftblackbg_img() {
                    this.player_lab = new player_lab();
                    this.man1_btn = new man1_btn();
                }
                return leftblackbg_img;
            }());
            exports_1("leftblackbg_img", leftblackbg_img);
            player_lab = /** @class */ (function () {
                function player_lab() {
                }
                return player_lab;
            }());
            exports_1("player_lab", player_lab);
            man1_btn = /** @class */ (function () {
                function man1_btn() {
                    this.man_img = new man_img();
                }
                return man1_btn;
            }());
            exports_1("man1_btn", man1_btn);
            man_img = /** @class */ (function () {
                function man_img() {
                }
                return man_img;
            }());
            exports_1("man_img", man_img);
            bg3 = /** @class */ (function () {
                function bg3() {
                    this.slideareabg = new slideareabg();
                    this.rightblackbg_img = new rightblackbg_img();
                }
                return bg3;
            }());
            exports_1("bg3", bg3);
            slideareabg = /** @class */ (function () {
                function slideareabg() {
                    /***/
                    this.slideunit_scr = new slideunit_scr();
                }
                return slideareabg;
            }());
            exports_1("slideareabg", slideareabg);
            slideunit_scr = /** @class */ (function () {
                function slideunit_scr() {
                    this.slideunitcontent = new slideunitcontent();
                }
                return slideunit_scr;
            }());
            exports_1("slideunit_scr", slideunit_scr);
            slideunitcontent = /** @class */ (function () {
                function slideunitcontent() {
                    this.jianbianbg_img = new jianbianbg_img();
                }
                return slideunitcontent;
            }());
            exports_1("slideunitcontent", slideunitcontent);
            jianbianbg_img = /** @class */ (function () {
                function jianbianbg_img() {
                    /***/
                    this.time_lab = new time_lab();
                }
                return jianbianbg_img;
            }());
            exports_1("jianbianbg_img", jianbianbg_img);
            time_lab = /** @class */ (function () {
                function time_lab() {
                }
                return time_lab;
            }());
            exports_1("time_lab", time_lab);
            rightblackbg_img = /** @class */ (function () {
                function rightblackbg_img() {
                    this.line_img = new line_img();
                    this.right2 = new right2();
                    this.rightbg1 = new rightbg1();
                }
                return rightblackbg_img;
            }());
            exports_1("rightblackbg_img", rightblackbg_img);
            line_img = /** @class */ (function () {
                function line_img() {
                }
                return line_img;
            }());
            exports_1("line_img", line_img);
            right2 = /** @class */ (function () {
                function right2() {
                    this.email1_img = new email1_img();
                    this.email_btn = new email_btn();
                    this.notice1_img = new notice1_img();
                    this.notice_btn = new notice_btn();
                    this.gear1_img = new gear1_img();
                    this.gear_btn = new gear_btn();
                }
                return right2;
            }());
            exports_1("right2", right2);
            email1_img = /** @class */ (function () {
                function email1_img() {
                }
                return email1_img;
            }());
            exports_1("email1_img", email1_img);
            email_btn = /** @class */ (function () {
                function email_btn() {
                }
                return email_btn;
            }());
            exports_1("email_btn", email_btn);
            notice1_img = /** @class */ (function () {
                function notice1_img() {
                }
                return notice1_img;
            }());
            exports_1("notice1_img", notice1_img);
            notice_btn = /** @class */ (function () {
                function notice_btn() {
                }
                return notice_btn;
            }());
            exports_1("notice_btn", notice_btn);
            gear1_img = /** @class */ (function () {
                function gear1_img() {
                }
                return gear1_img;
            }());
            exports_1("gear1_img", gear1_img);
            gear_btn = /** @class */ (function () {
                function gear_btn() {
                }
                return gear_btn;
            }());
            exports_1("gear_btn", gear_btn);
            rightbg1 = /** @class */ (function () {
                function rightbg1() {
                    this.signal_img = new signal_img();
                    this.ms_lab = new ms_lab();
                }
                return rightbg1;
            }());
            exports_1("rightbg1", rightbg1);
            signal_img = /** @class */ (function () {
                function signal_img() {
                }
                return signal_img;
            }());
            exports_1("signal_img", signal_img);
            ms_lab = /** @class */ (function () {
                function ms_lab() {
                }
                return ms_lab;
            }());
            exports_1("ms_lab", ms_lab);
            bg2 = /** @class */ (function () {
                function bg2() {
                    this.middlebg = new middlebg();
                    this.menubg = new menubg();
                }
                return bg2;
            }());
            exports_1("bg2", bg2);
            middlebg = /** @class */ (function () {
                function middlebg() {
                    this.functionbtn1_img = new functionbtn1_img();
                }
                return middlebg;
            }());
            exports_1("middlebg", middlebg);
            functionbtn1_img = /** @class */ (function () {
                function functionbtn1_img() {
                    this.functionbtn2_btn = new functionbtn2_btn();
                    this.functionbtn_lab = new functionbtn_lab();
                }
                return functionbtn1_img;
            }());
            exports_1("functionbtn1_img", functionbtn1_img);
            functionbtn2_btn = /** @class */ (function () {
                function functionbtn2_btn() {
                }
                return functionbtn2_btn;
            }());
            exports_1("functionbtn2_btn", functionbtn2_btn);
            functionbtn_lab = /** @class */ (function () {
                function functionbtn_lab() {
                }
                return functionbtn_lab;
            }());
            exports_1("functionbtn_lab", functionbtn_lab);
            menubg = /** @class */ (function () {
                function menubg() {
                    this.menu1_btn = new menu1_btn();
                    this.menu_img = new menu_img();
                    this.menulab_lab = new menulab_lab();
                    this.arrow2_img = new arrow2_img();
                    this.arrow1_img = new arrow1_img();
                }
                return menubg;
            }());
            exports_1("menubg", menubg);
            menu1_btn = /** @class */ (function () {
                function menu1_btn() {
                }
                return menu1_btn;
            }());
            exports_1("menu1_btn", menu1_btn);
            menu_img = /** @class */ (function () {
                function menu_img() {
                }
                return menu_img;
            }());
            exports_1("menu_img", menu_img);
            menulab_lab = /** @class */ (function () {
                function menulab_lab() {
                }
                return menulab_lab;
            }());
            exports_1("menulab_lab", menulab_lab);
            arrow2_img = /** @class */ (function () {
                function arrow2_img() {
                }
                return arrow2_img;
            }());
            exports_1("arrow2_img", arrow2_img);
            arrow1_img = /** @class */ (function () {
                function arrow1_img() {
                }
                return arrow1_img;
            }());
            exports_1("arrow1_img", arrow1_img);
        }
    };
});
System.register("MenuBtnCell", ["Common/CommonCell", "Manager/UIOpenOrHideManager", "HallView"], function (exports_2, context_2) {
    "use strict";
    var CommonCell_1, UIOpenOrHideManager_1, HallView_1, MenuBtnCell;
    var __moduleName = context_2 && context_2.id;
    return {
        setters: [
            function (CommonCell_1_1) {
                CommonCell_1 = CommonCell_1_1;
            },
            function (UIOpenOrHideManager_1_1) {
                UIOpenOrHideManager_1 = UIOpenOrHideManager_1_1;
            },
            function (HallView_1_1) {
                HallView_1 = HallView_1_1;
            }
        ],
        execute: function () {
            exports_2("MenuBtnCell", MenuBtnCell = /** @class */ (function (_super) {
                __extends(MenuBtnCell, _super);
                function MenuBtnCell() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                MenuBtnCell.prototype.setCellClass = function (value) {
                    this.nowClass = value;
                };
                // 选中当前cell 时的fun
                MenuBtnCell.prototype.selectFun = function (selectbool) {
                    _super.prototype.selectFun.call(this, selectbool);
                    if (selectbool) {
                        switch (this.cellData.data.type) {
                            case 1: // 排行榜
                                this.rankAndAwardFun();
                                break;
                            case 2: // 商店
                                this.shopFun();
                                break;
                            case 3: // 仓库
                                this.backpackFun();
                                break;
                        }
                    }
                    // this.nowClass.selectbox_img.transform.visible = selectbool;
                };
                MenuBtnCell.prototype.setData = function (value) {
                    this.cellData.data = value;
                    if (value) {
                        this.nowClass.functionbtn_lab.label.fontsize = 20;
                        this.nowClass.functionbtn_lab.label.text = value.namme.toString();
                        this.nowClass.transform.visible = true;
                    }
                    else {
                        this.nowClass.transform.visible = false;
                    }
                };
                // 打开钱包
                MenuBtnCell.prototype.buyTicketFun = function () {
                    console.error("打开了仓库");
                    // UIOpenOrHideManager.Instance.OpenBuyTicketView();
                    // UIOpenOrHideManager.Instance.HideHallView();
                    // HallView.menu = true;
                };
                // 打开排行榜
                MenuBtnCell.prototype.rankAndAwardFun = function () {
                    console.error("点击排名按钮");
                    // UIOpenOrHideManager.Instance.OpenRankView();
                    UIOpenOrHideManager_1.UIOpenOrHideManager.Instance.HideHallView();
                    HallView_1.HallView.menu = true;
                };
                // 打开商店
                MenuBtnCell.prototype.shopFun = function () {
                    UIOpenOrHideManager_1.UIOpenOrHideManager.Instance.HideHallView();
                    // UIOpenOrHideManager.Instance.OpenShopView();
                    HallView_1.HallView.menu = true;
                };
                MenuBtnCell.prototype.backpackFun = function () {
                    UIOpenOrHideManager_1.UIOpenOrHideManager.Instance.HideHallView();
                    // UIOpenOrHideManager.Instance.OpenBackpackView();
                    HallView_1.HallView.menu = true;
                };
                MenuBtnCell = __decorate([
                    m4m.reflect.node2DComponent
                ], MenuBtnCell);
                return MenuBtnCell;
            }(CommonCell_1.CommonCell)));
        }
    };
});
System.register("HallViewData", ["Data/BindKeyName", "PSDUI/UiDataManager", "HallView"], function (exports_3, context_3) {
    "use strict";
    var BindKeyName_1, UiDataManager_1, HallView_2, HallViewData;
    var __moduleName = context_3 && context_3.id;
    return {
        setters: [
            function (BindKeyName_1_1) {
                BindKeyName_1 = BindKeyName_1_1;
            },
            function (UiDataManager_1_1) {
                UiDataManager_1 = UiDataManager_1_1;
            },
            function (HallView_2_1) {
                HallView_2 = HallView_2_1;
            }
        ],
        execute: function () {
            HallViewData = /** @class */ (function () {
                function HallViewData() {
                    this.refreshTicketFunBind = this.refreshTicketFun.bind(this);
                    UiDataManager_1.UiDataManager.bindFunctionData(BindKeyName_1.BindKeyName.refreshTicket, this.refreshTicketFunBind);
                }
                HallViewData.prototype.refreshTicketFun = function (data) {
                    // console.error("刷新剩余门票数据", data);
                    var totalNum = data.totalBoughtTicketNum;
                    // let costNum = data.ticketCostNum;
                    // let leftTicket = totalNum - costNum;
                    // // console.error(leftTicket);
                    HallView_2.HallView.Instance.ticketImgNum.setNum(totalNum);
                };
                HallViewData.prototype.dispose = function () {
                    UiDataManager_1.UiDataManager.unBindFunctionData(BindKeyName_1.BindKeyName.refreshTicket, this.refreshTicketFunBind);
                };
                return HallViewData;
            }());
            exports_3("HallViewData", HallViewData);
        }
    };
});
System.register("HallView", ["Core/StageMgr", "Data/CellData", "Data/Grid", "Data/GridData", "Data/ListModel", "GameMgr", "Manager/UIOpenOrHideManager", "Manager/UITipManager", "Net/WebsocketTool", "Net/WsDataManager", "Tools/commTool", "MenuBtnCell", "Hall", "HallViewData", "PSDUI/UiManager", "Net/PingTimeManager", "Data/CommonUIUtils", "Tools/FrameMgr", "PSDUI/UiDataManager", "Data/BindKeyName", "eventMgr"], function (exports_4, context_4) {
    "use strict";
    var StageMgr_1, CellData_1, Grid_1, GridData_1, ListModel_1, GameMgr_1, UIOpenOrHideManager_2, UITipManager_1, WebsocketTool_1, WsDataManager_1, commTool_1, MenuBtnCell_1, Hall_1, HallViewData_1, UiManager_1, PingTimeManager_1, CommonUIUtils_1, FrameMgr_1, UiDataManager_2, BindKeyName_2, eventMgr_1, HallView;
    var __moduleName = context_4 && context_4.id;
    return {
        setters: [
            function (StageMgr_1_1) {
                StageMgr_1 = StageMgr_1_1;
            },
            function (CellData_1_1) {
                CellData_1 = CellData_1_1;
            },
            function (Grid_1_1) {
                Grid_1 = Grid_1_1;
            },
            function (GridData_1_1) {
                GridData_1 = GridData_1_1;
            },
            function (ListModel_1_1) {
                ListModel_1 = ListModel_1_1;
            },
            function (GameMgr_1_1) {
                GameMgr_1 = GameMgr_1_1;
            },
            function (UIOpenOrHideManager_2_1) {
                UIOpenOrHideManager_2 = UIOpenOrHideManager_2_1;
            },
            function (UITipManager_1_1) {
                UITipManager_1 = UITipManager_1_1;
            },
            function (WebsocketTool_1_1) {
                WebsocketTool_1 = WebsocketTool_1_1;
            },
            function (WsDataManager_1_1) {
                WsDataManager_1 = WsDataManager_1_1;
            },
            function (commTool_1_1) {
                commTool_1 = commTool_1_1;
            },
            function (MenuBtnCell_1_1) {
                MenuBtnCell_1 = MenuBtnCell_1_1;
            },
            function (Hall_1_1) {
                Hall_1 = Hall_1_1;
            },
            function (HallViewData_1_1) {
                HallViewData_1 = HallViewData_1_1;
            },
            function (UiManager_1_1) {
                UiManager_1 = UiManager_1_1;
            },
            function (PingTimeManager_1_1) {
                PingTimeManager_1 = PingTimeManager_1_1;
            },
            function (CommonUIUtils_1_1) {
                CommonUIUtils_1 = CommonUIUtils_1_1;
            },
            function (FrameMgr_1_1) {
                FrameMgr_1 = FrameMgr_1_1;
            },
            function (UiDataManager_2_1) {
                UiDataManager_2 = UiDataManager_2_1;
            },
            function (BindKeyName_2_1) {
                BindKeyName_2 = BindKeyName_2_1;
            },
            function (eventMgr_1_1) {
                eventMgr_1 = eventMgr_1_1;
            }
        ],
        execute: function () {
            exports_4("HallView", HallView = /** @class */ (function (_super) {
                __extends(HallView, _super);
                /*大厅界面*/
                function HallView() {
                    var _this = _super !== null && _super.apply(this, arguments) || this;
                    _this.uiLayer = UiManager_1.uiLayerType.midlayer;
                    /** 当前UI是否会影响场景玩家操作 */
                    _this.influenceSceneAction = false;
                    /* 当前UI是否会被记录（用于返回上一步打开）**/
                    _this.isLogUi = true;
                    _this.buyListModel = new ListModel_1.ListModel();
                    _this.gear_btn = false;
                    _this.selectCellIndex = 0;
                    _this.zbbbList = [{ namme: "LEADERBOARD", type: 1 }, { namme: "STORE", type: 2 }, { namme: "INVENTORY", type: 3 }];
                    _this.listekas = true;
                    _this._ev = new eventMgr_1.EventGeneric();
                    return _this;
                    // private onDisposeFun() {
                    //     this.button2_btn.button.removeListener(m4m.event.UIEventEnum.PointerDown, this.buyTicketFun, this);
                    //     this.button1_btn.button.removeListener(m4m.event.UIEventEnum.PointerDown, this.rankAndAwardFun, this);
                    // }
                }
                // public proNumImg: imgSpriteArrange;
                HallView.prototype.onInit = function () {
                    _super.prototype.onInit.call(this);
                    // //打开当前界面不影响其他界面 TipPanel
                    this.noAffected = true;
                    HallView.menu = true;
                    // if(UIStageselectManager.Instance.datainfo.length == 0){
                    //     UIStageselectManager.Instance.init();  // 通知服务器获取所有门票
                    // }if (UIStageselectTimeManager.Instance.timeinfo.length == 0) {
                    //     UIStageselectTimeManager.Instance.init(); // 通知服务器获取所有关卡时间
                    // }
                    //  屏蔽UI事件
                    this.viewData = new HallViewData_1.HallViewData();
                    commTool_1.commTool.makeUIEventDiscard(this.bg1.transform, true);
                    commTool_1.commTool.makeUIEventDiscard(this.socialiconbg.transform, true);
                    this.openshutFun();
                    this.menu1_btn_btnEvent = this.openshutFun.bind(this);
                    this.email_btn_btnEvent = this.openmailFun.bind(this);
                    // this.initBtns();
                    var gear = this.bg1.bg3.rightblackbg_img.right2.gear_btn.button; // 设置
                    gear.addListener(m4m.event.UIEventEnum.PointerDown, this.gearBtnDownFun, this);
                    // gear.addListener(m4m.event.UIEventEnum.PointerUp,this.gearBtnUpFun, this);
                    this.notice_btn_btnEvent = this.OpenNoticeFun.bind(this); // 公告
                    this.man1_btn_btnEvent = this.settingFun.bind(this);
                    // --------------------------------------------------------
                    this.naver_btn_btnEvent = this.settingFun.bind(this);
                    this.discord_btn_btnEvent = this.settingFun.bind(this);
                    this.youtube_btn_btnEvent = this.settingFun.bind(this);
                    this.telegram_btn_btnEvent = this.settingFun.bind(this);
                    this.twitter_btn_btnEvent = this.settingFun.bind(this);
                    this.medium_btn_btnEvent = this.settingFun.bind(this);
                    this.menulab_lab_text("MENU");
                    this.bg1.bg2.menubg.menulab_lab.label.fontsize -= 11;
                    // this.rightblackbg_img.rightbg1.ms_lab.label.fontsize -= 2;
                    var name = this.bg1.leftblackbg_img.player_lab.transform.addComponent("button"); // 名字
                    // this.blackju_img.image.color.a = 0;
                    name.addListener(m4m.event.UIEventEnum.PointerClick, this.settingFun, this);
                    var ID = WsDataManager_1.WsDataManager.UserVarBaseData.id;
                    console.error("界面玩家账号: ", ID, "玩家名", StageMgr_1.StageMgr.playername);
                    this.player_lab_text(StageMgr_1.StageMgr.playername);
                    this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.time_lab.label.text = "Interact with NPC to enter the game";
                    this.bg1.bg3.rightblackbg_img.rightbg1.ms_lab.label.fontsize -= 5; // 信号文字大小
                    var intY = this.bg1.bg3.rightblackbg_img.rightbg1.ms_lab.transform.height - 20;
                    this.bg1.bg3.rightblackbg_img.rightbg1.ms_lab.transform.setLayoutValue(m4m.framework.layoutOption.V_CENTER, intY);
                    this.onShow = this.onShowFun.bind(this);
                    this.onHide = this.onHideFun.bind(this);
                    this.InitBtn(this.zbbbList);
                    this.onDispose = this.onDisposeFun.bind(this);
                    // this.ticketImgNum = commTool.makeImgSpriteArrange(this.button2_btn.number_img.image);
                    // this.button2_btn.number_img.transform.visible = false;
                    // this.liaokuang.transform.visible = false;
                    // this.pinktiao_img.transform.visible = false;
                    // this.lpink_img.transform.visible = false;
                    if (GameMgr_1.GameMgr.openWalletBol) {
                    }
                    // 信号
                    this.NetworkBindFun = this.NetworkFun.bind(this);
                    UiDataManager_2.UiDataManager.bindFunctionData(BindKeyName_2.BindKeyName.Network, this.NetworkBindFun);
                    this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.time_lab.label.fontsize = 16;
                    this.time_lab_text("Your network quality is poor and the game is performing abnormally, please switch to a better network.");
                    // this.jianbianbg_img.time_lab.label.text = "Your network quality is poor and the game is performing abnormally, please switch to a better network.";
                    this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.time_lab.label.color = new m4m.math.color(1, 0, 0);
                    this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.time_lab.transform.visible = false;
                    this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.transform.visible = false;
                    this.bg1.bg3.rightblackbg_img.rightbg1.transform.visible = false;
                    //event reg
                    WebsocketTool_1.WebsocketTool.Instance.MailManager_getMails(); // 获取邮件
                };
                // private initBtns() {
                //     this.bg1.bg3.rightblackbg_img.right2.gear_btn.transform.removeComponentByTypeName("button");
                //     let btna = this.bg1.bg3.rightblackbg_img.right2.gear1_img.transform;
                //     let mtA = btna.addComponent("multiToucher") as multiToucher;
                //     mtA.addPointListener(m4m.event.PointEventEnum.PointDown, this.gearBtnDownFun, this);
                //     mtA.addPointListener(m4m.event.PointEventEnum.PointUp, this.gearBtnUpFun, this);
                // }
                HallView.prototype.settingFun = function () {
                    UITipManager_1.UITipManager.Instance.tipPanelText = "Function is under development";
                    UITipManager_1.UITipManager.Instance.type = UITipManager_1.TipPanelType.rest;
                    UIOpenOrHideManager_2.UIOpenOrHideManager.Instance.OpenTipsTCView();
                };
                HallView.prototype.OpenNoticeFun = function () {
                    // UIOpenOrHideManager.Instance.OpenAnnouncement();
                };
                HallView.prototype.InitBtn = function (list) {
                    if (!this.buygrid) {
                        var lo = m4m.framework.layoutOption;
                        var cellTrans = this.bg1.bg2.middlebg.functionbtn1_img.transform;
                        // tslint:disable-next-line: no-bitwise
                        cellTrans.layoutState = m4m.framework.layoutOption.LEFT | m4m.framework.layoutOption.V_CENTER;
                        // cellTrans.visible = true;
                        var cellPercentWidth = cellTrans.width;
                        var cellPercentHeight = cellTrans.height;
                        var cellData = new CellData_1.CellData();
                        cellData.width = cellPercentWidth;
                        cellData.height = cellPercentHeight;
                        var gridData = new GridData_1.GridData();
                        gridData.columns = list.length;
                        gridData.rows = 1;
                        gridData.offsetX = 6;
                        gridData.offsetY = 2;
                        var initX = cellTrans.getLayoutValue(lo.LEFT);
                        gridData.initXPlace = initX;
                        var initY = cellTrans.getLayoutValue(lo.V_CENTER);
                        gridData.initYPlace = initY;
                        gridData.cellName = MenuBtnCell_1.MenuBtnCell.name;
                        gridData.cellData = cellData;
                        gridData.cell = this.bg1.bg2.middlebg.functionbtn1_img;
                        //生成的格子放在父节点
                        gridData.parentTrans = cellTrans.parent;
                        gridData.cellLayoutX = lo.LEFT;
                        gridData.cellLayoutY = lo.V_CENTER;
                        this.buygrid = new Grid_1.Grid(gridData);
                        // this.buygrid.selectCallBackFun = this.buyCellFun.bind(this);
                        cellTrans.visible = false;
                        this.buyListModel.setSource(list);
                        this.buygrid.setListModel(this.buyListModel);
                    }
                };
                HallView.prototype.openshutFun = function () {
                    this.bg1.bg2.menubg.arrow1_img.transform.visible = false;
                    this.bg1.bg2.menubg.arrow2_img.transform.visible = false;
                    if (HallView.menu) {
                        var initY = this.bg1.bg2.menubg.transform.height - 40;
                        this.bg1.bg2.menubg.transform.setLayoutValue(m4m.framework.layoutOption.V_CENTER, initY);
                        this.bg1.bg2.menubg.arrow1_img.transform.visible = true;
                        this.bg1.bg2.middlebg.transform.visible = true;
                        HallView.menu = false;
                    }
                    else {
                        var initY = this.bg1.bg2.menubg.transform.height - 98;
                        this.bg1.bg2.menubg.transform.setLayoutValue(m4m.framework.layoutOption.V_CENTER, initY);
                        this.bg1.bg2.menubg.arrow2_img.transform.visible = true;
                        this.bg1.bg2.middlebg.transform.visible = false;
                        HallView.menu = true;
                    }
                    console.error("菜单状态", HallView.menu);
                };
                HallView.prototype.openmailFun = function () {
                    // UIOpenOrHideManager.Instance.OpenmailView(); // 打开邮件
                };
                HallView.prototype.gearBtnDownFun = function () {
                    console.error("点击了设置");
                    // UIOpenOrHideManager.Instance.OpenSettingView();
                };
                HallView.prototype.onShowFun = function () {
                    console.error("显示大厅UI界面");
                    //判断是否是pc端,如果不是,就显示摇杆
                    // if (PlatformUtil.WXGetSystemPlatformType != PlatformType.PC) {
                    UIOpenOrHideManager_2.UIOpenOrHideManager.Instance.OpenRockerView();
                    // this.ticketImgNum.setNum(UserDataManager.Instance.ticketNum);
                    // }
                };
                HallView.prototype.onHideFun = function () {
                    FrameMgr_1.FrameMgr.Remove(this.carousel, this);
                    console.error("隐藏大厅UI界面");
                    // UIOpenOrHideManager.Instance.HideRockerView();
                };
                HallView.prototype.onDisposeFun = function () {
                    FrameMgr_1.FrameMgr.Remove(this.carousel, this);
                };
                // ------------------------------------------------------------------
                // 信号
                HallView.prototype.NetworkFun = function (data) {
                    this.bg1.bg3.rightblackbg_img.rightbg1.transform.visible = true;
                    this.list = PingTimeManager_1.PingTimeManager.Instance.getNetworkQuality();
                    this.showlist(this.list);
                    this.showdata(data);
                };
                HallView.prototype.showlist = function (list) {
                    if (list == 1) {
                        var iconType = HallView.Instance.uiName + ".atlas.json_signalg";
                        this.bg1.bg3.rightblackbg_img.rightbg1.signal_img.image.sprite = CommonUIUtils_1.CommonUIUtils.getSprite(iconType);
                    }
                    else if (list == 2) {
                        var iconType = HallView.Instance.uiName + ".atlas.json_signalo";
                        this.bg1.bg3.rightblackbg_img.rightbg1.signal_img.image.sprite = CommonUIUtils_1.CommonUIUtils.getSprite(iconType);
                    }
                    else {
                        var iconType = HallView.Instance.uiName + ".atlas.json_signalr";
                        this.bg1.bg3.rightblackbg_img.rightbg1.signal_img.image.sprite = CommonUIUtils_1.CommonUIUtils.getSprite(iconType);
                        this.listeka(list);
                    }
                };
                HallView.prototype.listeka = function (list) {
                    if (list == 3) {
                        if (this.listekas == true) {
                            this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.transform.visible = true;
                            this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.time_lab.transform.visible = true;
                            FrameMgr_1.FrameMgr.Add(this.carousel, this);
                        }
                    }
                };
                HallView.prototype.carousel = function () {
                    var listes = this.bg1.bg3.slideareabg.slideunit_scr.transform.width + 500;
                    var listt;
                    var late;
                    listt = Math.floor(listes);
                    if (listt % 2 != 0) {
                        late = listt + 1;
                    }
                    else {
                        late = Math.floor(listes);
                    }
                    var count;
                    if (this.main == null) {
                        count = late - 2;
                        this.main = count;
                    }
                    else {
                        if (this.main != -600) {
                            count = this.main - 2;
                            this.main = count;
                            this.listekas = false;
                        }
                        else {
                            this.main = late;
                            FrameMgr_1.FrameMgr.Remove(this.carousel, this);
                            this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.transform.visible = false;
                            this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.time_lab.transform.visible = false;
                            this.listekas = true;
                        }
                    }
                    this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.time_lab.transform.setLayoutValue(m4m.framework.layoutOption.LEFT, count);
                    this.bg1.bg3.slideareabg.slideunit_scr.slideunitcontent.jianbianbg_img.time_lab.transform.markDirty();
                };
                HallView.prototype.showdata = function (data) {
                    if (data <= 100) {
                        this.ms_lab_text(data + "ms");
                        this.bg1.bg3.rightblackbg_img.rightbg1.ms_lab.label.color = new m4m.math.color(0, 1, 0, 1);
                    }
                    else if (data <= 200 && data > 100) {
                        this.ms_lab_text(data + "ms");
                        this.bg1.bg3.rightblackbg_img.rightbg1.ms_lab.label.color = new m4m.math.color(1, 1, 0, 1);
                    }
                    else {
                        this.ms_lab_text(data + "ms");
                        this.bg1.bg3.rightblackbg_img.rightbg1.ms_lab.label.color = new m4m.math.color(1, 0, 0, 1);
                    }
                };
                HallView.menu = false;
                return HallView;
            }(Hall_1.Hall)));
        }
    };
});
System.register("MenuBtn", ["Common/CommonCell", "Manager/UIOpenOrHideManager", "HallView"], function (exports_5, context_5) {
    "use strict";
    var CommonCell_2, UIOpenOrHideManager_3, HallView_3, MenuBtn;
    var __moduleName = context_5 && context_5.id;
    return {
        setters: [
            function (CommonCell_2_1) {
                CommonCell_2 = CommonCell_2_1;
            },
            function (UIOpenOrHideManager_3_1) {
                UIOpenOrHideManager_3 = UIOpenOrHideManager_3_1;
            },
            function (HallView_3_1) {
                HallView_3 = HallView_3_1;
            }
        ],
        execute: function () {
            exports_5("MenuBtn", MenuBtn = /** @class */ (function (_super) {
                __extends(MenuBtn, _super);
                function MenuBtn() {
                    return _super !== null && _super.apply(this, arguments) || this;
                }
                MenuBtn.prototype.setCellClass = function (value) {
                    this.nowClass = value;
                };
                // 选中当前cell 时的fun
                MenuBtn.prototype.selectFun = function (selectbool) {
                    _super.prototype.selectFun.call(this, selectbool);
                    if (selectbool) {
                        switch (this.cellData.data.type) {
                            case 1: // 排行榜
                                this.rankAndAwardFun();
                                break;
                            case 2: // 商店
                                this.shopFun();
                                break;
                            case 3: // 仓库
                                this.backpackFun();
                                break;
                        }
                    }
                    // this.nowClass.selectbox_img.transform.visible = selectbool;
                };
                MenuBtn.prototype.setData = function (value) {
                    this.cellData.data = value;
                    if (value) {
                        this.nowClass.functionbtn_lab.label.fontsize = 20;
                        this.nowClass.functionbtn_lab.label.text = value.namme.toString();
                        this.nowClass.transform.visible = true;
                    }
                    else {
                        this.nowClass.transform.visible = false;
                    }
                };
                // 打开钱包
                MenuBtn.prototype.buyTicketFun = function () {
                    console.error("打开了仓库");
                    // UIOpenOrHideManager.Instance.OpenBuyTicketView();
                    // UIOpenOrHideManager.Instance.HideHallView();
                    // HallView.menu = true;
                };
                // 打开排行榜
                MenuBtn.prototype.rankAndAwardFun = function () {
                    console.error("点击排名按钮");
                    // UIOpenOrHideManager.Instance.OpenRankView();
                    UIOpenOrHideManager_3.UIOpenOrHideManager.Instance.HideHallView();
                    HallView_3.HallView.menu = true;
                };
                // 打开商店
                MenuBtn.prototype.shopFun = function () {
                    UIOpenOrHideManager_3.UIOpenOrHideManager.Instance.HideHallView();
                    // UIOpenOrHideManager.Instance.OpenShopView();
                    HallView_3.HallView.menu = true;
                };
                MenuBtn.prototype.backpackFun = function () {
                    UIOpenOrHideManager_3.UIOpenOrHideManager.Instance.HideHallView();
                    // UIOpenOrHideManager.Instance.OpenBackpackView();
                    HallView_3.HallView.menu = true;
                };
                MenuBtn = __decorate([
                    m4m.reflect.node2DComponent
                ], MenuBtn);
                return MenuBtn;
            }(CommonCell_2.CommonCell)));
        }
    };
});
//# sourceMappingURL=Hall.js.map