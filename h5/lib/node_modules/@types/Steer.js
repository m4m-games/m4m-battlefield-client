var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
System.register("Steer", ["PSDUI/newUiBase"], function (exports_1, context_1) {
    "use strict";
    var newUiBase_1, Steer;
    var __moduleName = context_1 && context_1.id;
    return {
        setters: [
            function (newUiBase_1_1) {
                newUiBase_1 = newUiBase_1_1;
            }
        ],
        execute: function () {
            (function (Steer_1) {
                var Steer = /** @class */ (function (_super) {
                    __extends(Steer, _super);
                    function Steer() {
                        var _this = _super !== null && _super.apply(this, arguments) || this;
                        _this.uiName = "Steer";
                        _this.bg_img = new bg_img();
                        _this.loog_img = new loog_img();
                        _this.gamingbg = new gamingbg();
                        return _this;
                    }
                    Steer.prototype.onInit = function () {
                        if (this.onInite) {
                            this.onInite();
                        }
                        //添加按钮事件
                        this.gamingbg.titlebg_btn.button.addListener(m4m.event.UIEventEnum.PointerClick, this.titlebg_btn_event, this);
                    };
                    //按钮事件
                    Steer.prototype.titlebg_btn_event = function () { if (this.titlebg_btn_btnEvent)
                        this.titlebg_btn_btnEvent(); };
                    ;
                    //文字修改方法
                    /**修改label 修改label文字方法*/
                    Steer.prototype.title_lab_text = function (text) { this.gamingbg.titlebg_btn.title_lab.label.text = text; };
                    /**修改label 标题修改label文字方法*/
                    Steer.prototype.title2_lab_text = function (text) { this.gamingbg.titlebg1_img.title2_lab.label.text = text; };
                    /**修改label  this.gamingbg.title1_lab.label 修改label文字方法*/
                    Steer.prototype.title1_lab_text = function (text) { this.gamingbg.title1_lab.label.text = text; };
                    return Steer;
                }(newUiBase_1.newUiBase));
                Steer_1.Steer = Steer;
                var bg_img = /** @class */ (function () {
                    function bg_img() {
                    }
                    return bg_img;
                }());
                Steer_1.bg_img = bg_img;
                var loog_img = /** @class */ (function () {
                    function loog_img() {
                    }
                    return loog_img;
                }());
                Steer_1.loog_img = loog_img;
                var gamingbg = /** @class */ (function () {
                    function gamingbg() {
                        this.bg00_img = new bg00_img();
                        this.titlebg_btn = new titlebg_btn();
                        this.titlebg1_img = new titlebg1_img();
                        this.title1_lab = new title1_lab();
                    }
                    return gamingbg;
                }());
                Steer_1.gamingbg = gamingbg;
                var bg00_img = /** @class */ (function () {
                    function bg00_img() {
                    }
                    return bg00_img;
                }());
                Steer_1.bg00_img = bg00_img;
                var titlebg_btn = /** @class */ (function () {
                    function titlebg_btn() {
                        /***/
                        this.title_lab = new title_lab();
                    }
                    return titlebg_btn;
                }());
                Steer_1.titlebg_btn = titlebg_btn;
                var title_lab = /** @class */ (function () {
                    function title_lab() {
                    }
                    return title_lab;
                }());
                Steer_1.title_lab = title_lab;
                var titlebg1_img = /** @class */ (function () {
                    function titlebg1_img() {
                        this.steer_img = new steer_img();
                        this.steer1_img = new steer1_img();
                        /**标题*/
                        this.title2_lab = new title2_lab();
                    }
                    return titlebg1_img;
                }());
                Steer_1.titlebg1_img = titlebg1_img;
                var steer_img = /** @class */ (function () {
                    function steer_img() {
                    }
                    return steer_img;
                }());
                Steer_1.steer_img = steer_img;
                var steer1_img = /** @class */ (function () {
                    function steer1_img() {
                    }
                    return steer1_img;
                }());
                Steer_1.steer1_img = steer1_img;
                var title2_lab = /** @class */ (function () {
                    function title2_lab() {
                    }
                    return title2_lab;
                }());
                Steer_1.title2_lab = title2_lab;
                var title1_lab = /** @class */ (function () {
                    function title1_lab() {
                    }
                    return title1_lab;
                }());
                Steer_1.title1_lab = title1_lab;
            })(Steer || (exports_1("Steer", Steer = {})));
        }
    };
});
System.register("SteerView", ["Core/StageMgr", "Data/BindKeyName", "gamePlays/PlayGameType", "Manager/UIOpenOrHideManager", "Net/WebsocketTool", "PSDUI/UiDataManager", "PSDUI/UiManager", "Tools/PlatformUtil", "Steer", "Core/blockchain/ConnectWalletTonkeeper", "Manager/UITipManager"], function (exports_2, context_2) {
    "use strict";
    var StageMgr_1, BindKeyName_1, PlayGameType_1, UIOpenOrHideManager_1, WebsocketTool_1, UiDataManager_1, UiManager_1, PlatformUtil_1, Steer_2, ConnectWalletTonkeeper_1, UITipManager_1, SteerView;
    var __moduleName = context_2 && context_2.id;
    return {
        setters: [
            function (StageMgr_1_1) {
                StageMgr_1 = StageMgr_1_1;
            },
            function (BindKeyName_1_1) {
                BindKeyName_1 = BindKeyName_1_1;
            },
            function (PlayGameType_1_1) {
                PlayGameType_1 = PlayGameType_1_1;
            },
            function (UIOpenOrHideManager_1_1) {
                UIOpenOrHideManager_1 = UIOpenOrHideManager_1_1;
            },
            function (WebsocketTool_1_1) {
                WebsocketTool_1 = WebsocketTool_1_1;
            },
            function (UiDataManager_1_1) {
                UiDataManager_1 = UiDataManager_1_1;
            },
            function (UiManager_1_1) {
                UiManager_1 = UiManager_1_1;
            },
            function (PlatformUtil_1_1) {
                PlatformUtil_1 = PlatformUtil_1_1;
            },
            function (Steer_2_1) {
                Steer_2 = Steer_2_1;
            },
            function (ConnectWalletTonkeeper_1_1) {
                ConnectWalletTonkeeper_1 = ConnectWalletTonkeeper_1_1;
            },
            function (UITipManager_1_1) {
                UITipManager_1 = UITipManager_1_1;
            }
        ],
        execute: function () {
            SteerView = /** @class */ (function (_super) {
                __extends(SteerView, _super);
                function SteerView() {
                    var _this = _super !== null && _super.apply(this, arguments) || this;
                    /**其他面板show 时 不隐藏 */
                    _this.notHideOnOtherShow = true;
                    _this.uiLayer = UiManager_1.uiLayerType.highlayer;
                    return _this;
                }
                SteerView.prototype.onInit = function () {
                    _super.prototype.onInit.call(this);
                    this.onShow = this.onShowFunc.bind(this);
                    this.onHide = this.onHideFunc.bind(this);
                    this.onDispose = this.onDisposeFunc.bind(this);
                    this.titlebg_btn_btnEvent = this.titleBtnfun.bind(this);
                    this.title2_lab_text("CONTROL TUTORIAL");
                    this.title1_lab_text("");
                    this.LoginSucceeded = this.LoginSucceededFun.bind(this);
                    UiDataManager_1.UiDataManager.bindFunctionData(BindKeyName_1.BindKeyName.LoginSucceeded, this.LoginSucceeded);
                };
                SteerView.prototype.onShowFunc = function () {
                    this.LoginSucceededFun();
                    if (PlatformUtil_1.PlatformUtil.getTypeByBrowser() == PlatformUtil_1.PlatformType.PC) {
                        this.gamingbg.titlebg1_img.steer1_img.transform.visible = true;
                        this.gamingbg.titlebg1_img.steer_img.transform.visible = false;
                    }
                    else {
                        this.gamingbg.titlebg1_img.steer1_img.transform.visible = false;
                        this.gamingbg.titlebg1_img.steer_img.transform.visible = true;
                    }
                };
                SteerView.prototype.onDisposeFunc = function () {
                    UiDataManager_1.UiDataManager.unBindFunctionData(BindKeyName_1.BindKeyName.LoginSucceeded, this.LoginSucceeded);
                };
                SteerView.prototype.onHideFunc = function () {
                };
                SteerView.prototype.titleBtnfun = function () {
                    if (!StageMgr_1.StageMgr.PlayerGUID) {
                        ConnectWalletTonkeeper_1.ConnectWalletTonkeeper.Instance.loginAccount(function (res) {
                            var address = res;
                            console.error(res);
                            WebsocketTool_1.WebsocketTool.Instance.LoginManager_loginWithOutWallet(address, "123", ConnectWalletTonkeeper_1.ConnectWalletTonkeeper.Instance.tid);
                        });
                        // ConnectWalletManager.Instance.loginToken((res) => {
                        //     let address = res;
                        //     console.error(res);
                        //     WebsocketTool.Instance.LoginManager_loginWithOutWallet(address, "123");
                        // });
                    }
                    else {
                        ConnectWalletTonkeeper_1.ConnectWalletTonkeeper.Instance.send()
                            .then(function (res) {
                            console.error("res", res);
                            if (res) {
                                WebsocketTool_1.WebsocketTool.Instance.TicketManager_getTicketWithOutWallet(1, PlayGameType_1.PlayGameType.GreatChampionship);
                                WebsocketTool_1.WebsocketTool.Instance.TicketManager_useTickToGameRoom(PlayGameType_1.PlayGameType.GreatChampionship);
                                UIOpenOrHideManager_1.UIOpenOrHideManager.Instance.HideSteerView();
                            }
                            else {
                                UITipManager_1.UITipManager.Instance.tipPanelText = "Cancelled";
                                UITipManager_1.UITipManager.Instance.type = UITipManager_1.TipPanelType.rest;
                                UIOpenOrHideManager_1.UIOpenOrHideManager.Instance.OpenTipsTCView();
                            }
                        })
                            .catch(function (res) {
                            console.error("error", res);
                        });
                    }
                };
                SteerView.prototype.LoginSucceededFun = function () {
                    if (!StageMgr_1.StageMgr.PlayerGUID) {
                        this.title_lab_text("CONNET WALLET");
                    }
                    else {
                        this.title_lab_text("START");
                        this.title1_lab_text("This will charge you 0.001 TON.");
                    }
                };
                return SteerView;
            }(Steer_2.Steer.Steer));
            exports_2("SteerView", SteerView);
        }
    };
});
//# sourceMappingURL=Steer.js.map