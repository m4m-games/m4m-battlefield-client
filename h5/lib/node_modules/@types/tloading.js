var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        if (typeof b !== "function" && b !== null)
            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
System.register("tloading", ["PSDUI/newUiBase"], function (exports_1, context_1) {
    "use strict";
    var newUiBase_1, tloading;
    var __moduleName = context_1 && context_1.id;
    return {
        setters: [
            function (newUiBase_1_1) {
                newUiBase_1 = newUiBase_1_1;
            }
        ],
        execute: function () {
            (function (tloading_1) {
                var tloading = /** @class */ (function (_super) {
                    __extends(tloading, _super);
                    function tloading() {
                        var _this = _super !== null && _super.apply(this, arguments) || this;
                        _this.uiName = "tloading";
                        _this.bg_img = new bg_img();
                        _this.loog_img = new loog_img();
                        return _this;
                    }
                    tloading.prototype.onInit = function () {
                        if (this.onInite) {
                            this.onInite();
                        }
                        //添加按钮事件
                    };
                    //按钮事件
                    //文字修改方法
                    /**修改label  this.loog_img.title1_lab.label 修改label文字方法*/
                    tloading.prototype.title1_lab_text = function (text) { this.loog_img.title1_lab.label.text = text; };
                    return tloading;
                }(newUiBase_1.newUiBase));
                tloading_1.tloading = tloading;
                var bg_img = /** @class */ (function () {
                    function bg_img() {
                    }
                    return bg_img;
                }());
                tloading_1.bg_img = bg_img;
                var loog_img = /** @class */ (function () {
                    function loog_img() {
                        this.gamingbg = new gamingbg();
                        /**加载进度条*/
                        this.loadbg_bar = new loadbg_bar();
                        this.title1_lab = new title1_lab();
                    }
                    return loog_img;
                }());
                tloading_1.loog_img = loog_img;
                var gamingbg = /** @class */ (function () {
                    function gamingbg() {
                    }
                    return gamingbg;
                }());
                tloading_1.gamingbg = gamingbg;
                var loadbg_bar = /** @class */ (function () {
                    function loadbg_bar() {
                        this.loadbgcut = new loadbgcut();
                    }
                    return loadbg_bar;
                }());
                tloading_1.loadbg_bar = loadbg_bar;
                var loadbgcut = /** @class */ (function () {
                    function loadbgcut() {
                        /**加载进度条*/
                        this.load1_img = new load1_img();
                    }
                    return loadbgcut;
                }());
                tloading_1.loadbgcut = loadbgcut;
                var load1_img = /** @class */ (function () {
                    function load1_img() {
                    }
                    return load1_img;
                }());
                tloading_1.load1_img = load1_img;
                var title1_lab = /** @class */ (function () {
                    function title1_lab() {
                    }
                    return title1_lab;
                }());
                tloading_1.title1_lab = title1_lab;
            })(tloading || (tloading = {}));
            exports_1("tloading", tloading);
        }
    };
});
System.register("tloadingViewData", [], function (exports_2, context_2) {
    "use strict";
    var tloadingViewData;
    var __moduleName = context_2 && context_2.id;
    return {
        setters: [],
        execute: function () {
            tloadingViewData = /** @class */ (function () {
                function tloadingViewData() {
                }
                //设置loading 进度条
                tloadingViewData.prototype.setLoadingPro = function () {
                };
                tloadingViewData.prototype.dispose = function () {
                };
                return tloadingViewData;
            }());
            exports_2("tloadingViewData", tloadingViewData);
        }
    };
});
System.register("tloadingView", ["Manager/UIData/UiNames", "Manager/UIOpenOrHideManager", "Manager/UITipManager", "PSDUI/UiManager", "Tools/FrameMgr", "tloading", "tloadingViewData"], function (exports_3, context_3) {
    "use strict";
    var UiNames_1, UIOpenOrHideManager_1, UITipManager_1, UiManager_1, FrameMgr_1, tloading_2, tloadingViewData_1, tloadingView;
    var __moduleName = context_3 && context_3.id;
    return {
        setters: [
            function (UiNames_1_1) {
                UiNames_1 = UiNames_1_1;
            },
            function (UIOpenOrHideManager_1_1) {
                UIOpenOrHideManager_1 = UIOpenOrHideManager_1_1;
            },
            function (UITipManager_1_1) {
                UITipManager_1 = UITipManager_1_1;
            },
            function (UiManager_1_1) {
                UiManager_1 = UiManager_1_1;
            },
            function (FrameMgr_1_1) {
                FrameMgr_1 = FrameMgr_1_1;
            },
            function (tloading_2_1) {
                tloading_2 = tloading_2_1;
            },
            function (tloadingViewData_1_1) {
                tloadingViewData_1 = tloadingViewData_1_1;
            }
        ],
        execute: function () {
            /*标题加载界面*/
            tloadingView = /** @class */ (function (_super) {
                __extends(tloadingView, _super);
                function tloadingView() {
                    var _this = _super !== null && _super.apply(this, arguments) || this;
                    _this.currentPro = 0;
                    _this.uiLayer = UiManager_1.uiLayerType.highlayer;
                    _this.timeCount = 0;
                    _this.stopUpdateBol = false;
                    return _this;
                }
                tloadingView.prototype.onInit = function () {
                    _super.prototype.onInit.call(this);
                    // //打开当前界面不影响其他界面 TipPanel
                    // this.noAffected = true;
                    //屏蔽UI事件
                    // commTool.makeUIEventDiscard(this.gamebg.transform);
                    // this.proNumImg = commTool.makeImgSpriteArrange(this.number_img.image);
                    // this.number_img.transform.visible = false;
                    // this.loog_img.gamingbg.title_lab.label.text = "LOADING...";
                    this.title1_lab_text("LOADING...");
                    this.ViewData = new tloadingViewData_1.tloadingViewData();
                    //多语言版本
                    this.onShow = this.onShowFun.bind(this);
                    this.onHide = this.onHideFun.bind(this);
                    this.onDispose = this.onDisposeFun.bind(this);
                    // this.loadbg_bar.progressbar.value =100;
                };
                tloadingView.prototype.UpdateFun = function (del) {
                    if (this.stopUpdateBol)
                        return;
                    this.timeCount += del;
                    var rand = Math.round(Math.random() * 10);
                    this.currentPro += rand;
                    this.loog_img.loadbg_bar.progressbar.value = this.currentPro / 100;
                    if (this.currentPro > 100) {
                        this.currentPro = 100;
                    }
                    //let proStr = `${this.currentPro}b`;
                    //this.proNumImg.setStr(proStr);
                    if (this.timeCount >= 20) {
                        UITipManager_1.UITipManager.Instance.tipPanelText = "Load timeout\nplease refresh the page and re-enter the game";
                        UITipManager_1.UITipManager.Instance.type = UITipManager_1.TipPanelType.mistake;
                        UIOpenOrHideManager_1.UIOpenOrHideManager.Instance.OpenTipsTCView();
                        this.stopUpdateBol = true;
                    }
                };
                tloadingView.prototype.onShowFun = function () {
                    this.stopUpdateBol = false;
                    this.currentPro = 0;
                    this.timeCount = 0;
                    FrameMgr_1.FrameMgr.Add(this.UpdateFun, this);
                    if (UiManager_1.UiManager.isUiShow(UiNames_1.UiNames.wloading)) {
                        UIOpenOrHideManager_1.UIOpenOrHideManager.Instance.HideWloadingView();
                    }
                };
                tloadingView.prototype.onHideFun = function () {
                    FrameMgr_1.FrameMgr.Remove(this.UpdateFun, this);
                };
                tloadingView.prototype.onDisposeFun = function () {
                };
                return tloadingView;
            }(tloading_2.tloading.tloading));
            exports_3("tloadingView", tloadingView);
        }
    };
});
//# sourceMappingURL=tloading.js.map